<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Éè„É≥„Ç∞„É´„Ç≠„Éº„Éú„Éº„Éâ„Çø„Ç§„Éó„Ç≤„Éº„É†</title>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            text-align: center;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            background-color: #f0f2f5;
            color: #333;
        }
        h1 {
            margin-top: 20px;
            font-size: 2.5em;
            color: #4a90e2;
        }
        #target {
            font-size: 5em;
            margin-bottom: 20px;
            font-weight: bold;
            color: #333;
        }
        #romanization {
            font-size: 2em;
            margin-bottom: 20px;
            color: #555;
            font-style: italic;
        }
        #input {
            font-size: 1.5em;
            padding: 10px;
            width: 80%;
            max-width: 400px;
            border: 2px solid #4a90e2;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        #message {
            margin-top: 20px;
            font-size: 1.2em;
            height: 1.5em;
        }
        #log, #scorelog {
            margin-top: 20px;
            font-size: 1em;
            text-align: left;
            max-width: 300px;
            width: 80%;
            border: 1px solid #ccc;
            padding: 10px;
            background-color: #fff;
            border-radius: 5px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        #timer, #score {
            font-size: 1.5em;
            margin-top: 20px;
        }
        #startButton {
            font-size: 1.5em;
            padding: 10px 20px;
            margin-top: 20px;
            cursor: pointer;
            background-color: #4a90e2;
            color: #fff;
            border: none;
            border-radius: 5px;
            transition: background-color 0.3s;
        }
        #startButton:hover {
            background-color: #357ab8;
        }
        .container {
            text-align: center;
            margin-top: 20px;
        }
        .image {
            width: 100%;
            height: auto;
        }
        @media (min-width: 600px) {
            body {
                margin: 50px;
            }
            #input {
                width: 50%;
            }
            #log, #scorelog {
                width: 50%;
            }
        }
    </style>
</head>
<body>
    <h1>„Éè„É≥„Ç∞„É´„Ç≠„Éº„Éú„Éº„Éâ„Çø„Ç§„Éó„Ç≤„Éº„É†</h1>
    <div id="target">‚ùìÔ∏è</div>
    <div id="romanization">üî§</div>
    <input type="text" id="input" placeholder="„Åì„Åì„Å´ÂõûÁ≠î„ÇíÂÖ•Âäõ" autofocus>
    <div id="message"></div>
    <button id="startButton">„Çπ„Çø„Éº„Éà</button>
    <div id="timer">ÊÆã„ÇäÊôÇÈñì: 60Áßí</div>
    <div id="score">„Çπ„Ç≥„Ç¢: 0</div>
    <div class="container">
        <div class="image">
            <img src="keyboard.jpg" alt="Keyboard Image">
        </div>
    </div>
    <div id="scorelog">ÈÅéÂéª„ÅÆ„Éè„Ç§„Çπ„Ç≥„Ç¢</div>
    <div id="log">Ëß£Á≠îË®òÈå≤</div>

    <script>
        const vowels = ['„Öè', '„Öë', '„Öì', '„Öï', '„Öó', '„Öõ', '„Öú', '„Ö†', '„Ö°', '„Ö£'];
        const consonants = ['„Ñ±', '„Ñ¥', '„Ñ∑', '„Ñπ', '„ÖÅ', '„ÖÇ', '„ÖÖ', '„Öá', '„Öà', '„Öä', '„Öã', '„Öå', '„Öç', '„Öé'];
        const characters = vowels.concat(consonants);

        const romanizationMap = {
            '„Öè': 'a', '„Öë': 'ya', '„Öì': 'eo', '„Öï': 'yeo', '„Öó': 'o', '„Öõ': 'yo', '„Öú': 'u', '„Ö†': 'yu', '„Ö°': 'eu', '„Ö£': 'i',
            '„Ñ±': 'g', '„Ñ¥': 'n', '„Ñ∑': 'd', '„Ñπ': 'r', '„ÖÅ': 'm', '„ÖÇ': 'b', '„ÖÖ': 's', '„Öá': 'ng', '„Öà': 'j', '„Öä': 'ch', '„Öã': 'k', '„Öå': 't', '„Öç': 'p', '„Öé': 'h'
        };

        const keyboardMap = {
            '„Öè': 'k', '„Öë': 'i', '„Öì': 'j', '„Öï': 'u', '„Öó': 'h', '„Öõ': 'y', '„Öú': 'n', '„Ö†': 'b', '„Ö°': 'm', '„Ö£': 'l',
            '„Ñ±': 'r', '„Ñ¥': 's', '„Ñ∑': 'e', '„Ñπ': 'f', '„ÖÅ': 'a', '„ÖÇ': 'q', '„ÖÖ': 't', '„Öá': 'd', '„Öà': 'w', '„Öä': 'c', '„Öã': 'z', '„Öå': 'x', '„Öç': 'v', '„Öé': 'g'
        };

        const targetElement = document.getElementById('target');
        const romanizationElement = document.getElementById('romanization');
        const inputElement = document.getElementById('input');
        const messageElement = document.getElementById('message');
        const logElement = document.getElementById('log');
        const timerElement = document.getElementById('timer');
        const scoreElement = document.getElementById('score');
        const startButton = document.getElementById('startButton');
        const scoreLogElement = document.getElementById('scorelog');

        let log = [];
        let score = 0;
        let timeLeft = 60;
        let timerInterval;
        let totalQuestions = 0;

        function getRandomCharacter() {
            const randomIndex = Math.floor(Math.random() * characters.length);
            return characters[randomIndex];
        }

        function speakCharacter(character) {
            const utterance = new SpeechSynthesisUtterance(character);
            utterance.lang = 'ko-KR';
            window.speechSynthesis.speak(utterance);
        }

        function setNewTarget() {
            const newCharacter = getRandomCharacter();
            targetElement.textContent = newCharacter;
            romanizationElement.textContent = romanizationMap[newCharacter];
            inputElement.value = '';
            messageElement.textContent = '';
            speakCharacter(newCharacter);
        }

        function updateLog(isCorrect, userInput) {
            const currentCharacter = targetElement.textContent;
            log.push({ character: currentCharacter, correct: isCorrect, userInput: userInput });
            displayLog();
        }

        function displayLog() {
            logElement.innerHTML = log.map((entry, index) => {
                if (entry.character === '„Ç≤„Éº„É†ÁµÇ‰∫Ü') {
                    return `<div>${entry.character}: „Çπ„Ç≥„Ç¢ ${entry.userInput}</div>`;
                } else if (entry.correct) {
                    return `<div>${index + 1}. ${entry.character} (${romanizationMap[entry.character]}): ‚úÖ Ê≠£Ëß£ÔºÅüéâ</div>`;
                } else {
                    return `<div>${index + 1}. ${entry.character} (${romanizationMap[entry.character]}): ‚ùå ‰∏çÊ≠£Ëß£ üò¢ (ÂÖ•Âäõ: ${entry.userInput})</div>`;
                }
            }).join('');
        }

        function startTimer() {
            clearInterval(timerInterval);
            timerInterval = setInterval(() => {
                timeLeft--;
                timerElement.textContent = `ÊÆã„ÇäÊôÇÈñì: ${timeLeft}Áßí`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    endGame();
                }
            }, 1000);
        }

        function endGame() {
            inputElement.disabled = true;
            messageElement.textContent = `„Ç≤„Éº„É†ÁµÇ‰∫ÜÔºÅ„ÅÇ„Å™„Åü„ÅÆ„Çπ„Ç≥„Ç¢„ÅØ ${score}/${totalQuestions} „Åß„Åô„ÄÇ`;
            messageElement.style.color = 'blue';
            log.push({ character: '„Ç≤„Éº„É†ÁµÇ‰∫Ü', correct: null, userInput: `${score}/${totalQuestions}` });
            displayLog();
            displayScoreLog();
        }

        function displayScoreLog() {
            scoreLogElement.innerHTML = log
                .filter(entry => entry.character === '„Ç≤„Éº„É†ÁµÇ‰∫Ü')
                .map((entry, index) => `<div>${index + 1}. ${entry.character}: „Çπ„Ç≥„Ç¢ ${entry.userInput}</div>`)
                .join('');
        }

        function updateScore() {
            scoreElement.textContent = `„Çπ„Ç≥„Ç¢: ${score}/${totalQuestions}`;
        }

        inputElement.addEventListener('input', () => {
            const userInput = inputElement.value.toLowerCase();
            const currentCharacter = targetElement.textContent;
            if (userInput.length === 1 && keyboardMap[currentCharacter] === userInput) {
                messageElement.textContent = '‚úÖ Ê≠£Ëß£ÔºÅüéâ';
                messageElement.style.color = 'green';
                updateLog(true, userInput);
                score++;
                totalQuestions++;
                setTimeout(() => {
                    setNewTarget();
                    updateScore();
                }, 1000);
            } else if (userInput.length === 1) {
                messageElement.textContent = '‚ùå „ÇÇ„ÅÜ‰∏ÄÂ∫¶Ë©¶„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇüò¢';
                messageElement.style.color = 'red';
                updateLog(false, userInput);
                totalQuestions++;
                updateScore();
            }
            inputElement.value = '';
        });

        startButton.addEventListener('click', startGame);

        document.addEventListener('keydown', (event) => {
            if (event.key === 'Enter' && inputElement.disabled) {
                startGame();
            }
        });

        function startGame() {
            score = 0;
            totalQuestions = 0;
            timeLeft = 60;
            inputElement.disabled = false;
            inputElement.value = '';
            scoreElement.textContent = `„Çπ„Ç≥„Ç¢: ${score}/${totalQuestions}`;
            timerElement.textContent = `ÊÆã„ÇäÊôÇÈñì: ${timeLeft}Áßí`;
            messageElement.textContent = '';
            startTimer();
            setNewTarget();
            inputElement.focus();
        }

        inputElement.value = '';
    </script>
</body>
</html>
